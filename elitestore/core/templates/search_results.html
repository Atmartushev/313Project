{% extends "base_generic.html" %}

{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/products.css' %}">
<div class="container-fluid mt-4">
    <h1 class="text-center">Search Results for "{{ query }}"</h1>
    {% for product in results %}
    {% if forloop.first or forloop.counter0|divisibleby:3 %}
    {% if not forloop.first %}
</div> <!-- End previous row if not the first loop iteration -->
{% endif %}
<div class="row"> <!-- Start a new row -->
    {% endif %}
    <div class="col-md-4 d-flex ">
        <div class="card products">
            <a href="{% url 'product_detail' pk=product.pk %}" class="text-decoration-none text-reset">
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="card-img-top img-fluid">
                <div class="card-body">
                    <h4>{{ product.name }}</h4>
                    <p>{{ product.description }}</p>
                </div>
        </div>
        </a>
    </div>
    {% if forloop.last %}
</div> <!-- Close the last row -->
{% endif %}
{% endfor %}
</div>
{% endblock %}